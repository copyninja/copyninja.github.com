<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>>git-buildpackage: Renaming a package in Git repo</title>
    <meta name="author" content="Vasudev Kamath" />

    <!-- Normalize CSS -->
    <link rel="stylesheet" href="/blog/css/normalize.css" type="text/css"/>

    <!-- 1140 Grid CSS -->
    <link media="screen" rel="stylesheet" href="/blog/css/1140.css" type="text/css"/>

    <!-- styles.css -->
    <link media="screen" rel="stylesheet" href="/blog/css/styles.css" type="text/css"/>

    <!-- 1140 Grid CSS related javascript -->
    <script src="/blog/js/css3-mediaqueries.js" type="text/javascript"></script>

    
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/blog/css/emacs.css" type="text/css" />

    <!-- Webfont url -->
    <link rel="stylesheet" href="/blog/fonts/stylesheet-bitstream.css" type="text/css"/>
    <link rel="stylesheet" href="/blog/fonts/stylesheet-angelina.css" type="text/css"/>

    <!-- Homepage CSS -->
    <link rel="stylesheet" href="/blog/css/screen.css" type="text/css" media="screen, projection" />

  </head>
  <body>

    <div class="container header">
      <div class="row">
        <div class="site">
          <div class="title">
            <a href="/">Random Ramblings</a>
          </div>
          <div class="subheading">
            Random thoughts shooting out of volatile mind
          </div>
        </div>
      </div>
    </div>
    <div class="container details">
      <div class="row">
        <div class="eightcol">
          <div id="post">
><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">Just to give a background I've been working on renaming <i>ttf-indic-fonts </i>package in <i><a href="http://alioth.debian.org/projects/debian-in">Debian-IN</a> </i>team. And after packaging the <i>Lohit and Samyak fonts </i>I sent a mail to <i>debian-in-workers </i>mailing list giving the current status. And after a short <a href="http://lists.alioth.debian.org/pipermail/debian-in-workers/2011-November/001734.html">discussion</a> <i>Christian bubulle Perrier</i> suggested me to use ISO 15924 language codes rather than ISO script code (2 letters).</div><br /><div style="text-align: justify;">We are now using the Git VCS for maintaining the packages and as known the <i>git-buildpackage </i>uses a branch called <i>pristine-tar&nbsp; </i>and <i>upstream </i>branch to regenerate the <i>orig tar ball. </i>So if you only change the package name in <i>control </i>and <i>changelog </i>and <i>git-buildpackage </i>fails badly saying it can't create <i>orig tar ball</i>. So do the following</div><div style="text-align: justify;"><br /></div><blockquote class="tr_bq"><i>git checkout pristine-tar</i></blockquote><blockquote class="tr_bq"><i>git mv package_version.orig.tar.gz.delta newpackage_version.orig.tar.gz</i>.<i>delta</i><br /><i>git mv package_version.orig.tar.gz.id newpackage_version.orig.tar.gz.id</i></blockquote><div style="text-align: justify;"><i> </i>Here <i>package</i> is old package name and <i>newpackage</i> is new name for the package. Next commit the changes. Now the important point if you simply write <i>renamed the package </i>as new commit message the when you run <i>git-buildpackage </i>you will get following warning</div><blockquote class="tr_bq"><i>git-buildpackage: warning renamed pristine-tar data unable to detect compression type assuming gzip</i></blockquote><div style="text-align: justify;">After struggling a lot finally figured that <i>pristine-tar </i>command uses commit message to assume the compression type. Yes thats how pristine-tar is working so you should write commit message similar to the default one created by <i>git-import-dsc </i>when first importing package to repository. To be more precise commit message should be some thing like below.</div><blockquote class="tr_bq"><div style="text-align: justify;"><i>pristine-tar data for newpackage_version.orig.tar.gz</i></div></blockquote>Replace is <i>newpackage_version.orig.tar.gz </i>with actual orig tar ball name and in case your package is bzip then replace gz with bz2. And you have successfully renamed the package in git repository.</div>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>23 Dec 2011</span> &raquo; <a href=" / /2011/12/23/dh-make-font-a-font-package-helper-for-debian.html">>dh-make-font - A Font package helper for Debian</a></li>
    
      <li><span>14 Dec 2011</span> &raquo; <a href=" / /2011/12/14/my-journey-with-debian-and-floss-part-2.html">>My Journey with Debian and FLOSS - Part 2</a></li>
    
      <li><span>13 Dec 2011</span> &raquo; <a href=" / /2011/12/13/my-journey-with-debian-and-floss-part-1.html">>My Journey with Debian and FLOSS - Part 1</a></li>
    
  </ul>
</div>

        </div>
        <div class="fourcol last">
          <div class="widget">
            Connect to me on Friendica
            <script src="http://frndk.de/widgets/friends?k=37533857"></script>
          </div>
        </div>
      </div>
    </div>

    <div class="container footer">
      <div class="site">
        <div class="row">
          <div class="footer">
            <div class="contact">
              <p>
                (c) 2012 Vasudeva Kamath<br />
                The contents of this site are shared under <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="contact">CC-BY-SA-3.0 Unported</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <a href="http://github.com/copyninja"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
  </body>
</html>


