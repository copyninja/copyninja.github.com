<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>>iBus tray icon issue fix</title>
    <meta name="author" content="Vasudev Kamath" />

    <!-- Normalize CSS -->
    <link rel="stylesheet" href="/blog/css/normalize.css" type="text/css"/>

    <!-- 1140 Grid CSS -->
    <link media="screen" rel="stylesheet" href="/blog/css/1140.css" type="text/css"/>

    <!-- styles.css -->
    <link media="screen" rel="stylesheet" href="/blog/css/styles.css" type="text/css"/>

    <!-- 1140 Grid CSS related javascript -->
    <script src="/blog/js/css3-mediaqueries.js" type="text/javascript"></script>

    
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/blog/css/emacs.css" type="text/css" />

    <!-- Webfont url -->
    <link rel="stylesheet" href="/blog/fonts/stylesheet-bitstream.css" type="text/css"/>
    <link rel="stylesheet" href="/blog/fonts/stylesheet-angelina.css" type="text/css"/>

    <!-- Homepage CSS -->
    <link rel="stylesheet" href="/blog/css/screen.css" type="text/css" media="screen, projection" />

  </head>
  <body>

    <div class="container header">
      <div class="row">
        <div class="site">
          <div class="title">
            <a href="/">Random Ramblings</a>
          </div>
          <div class="subheading">
            Random thoughts shooting out of volatile mind
          </div>
        </div>
      </div>
    </div>
    <div class="container details">
      <div class="row">
        <div class="eightcol">
          <div id="post">
><div xmlns="http://www.w3.org/1999/xhtml"><div align="justify">I use Debian Sid with KDE 4.4 and use iBus as IME for using Indic languages. But recently the iBus tray icon was not loading and a white patch used to appear which looked ugly. To see what is going on I ran ibus in debug mode using following command.</div><blockquote><div align="justify"><b><i>ibus-daemon -xvr</i></b></div></blockquote>I got the following message in the terminal<br /><blockquote><i>/usr/share/ibus/ui/gtk/icon.py:35: GtkWarning: Could not find the icon 'ibus-keyboard'. The 'hicolor' theme</i></blockquote><blockquote><i>was not found either, perhaps you need to install it.</i></blockquote><blockquote><i>You can get a copy from:</i></blockquote><blockquote><i> http://icon-theme.freedesktop.org/releases</i></blockquote><div align="justify">The message clearly indicates the Gtk system was unable to find out icon named <i>ibus-keyboard</i>. To debug this issue I opened the file <i>/usr/share/ibus/ui/gtk/icon.py</i> to see if the name or path of icon is in the file. Frankly I'm a noob in PyGtk programming and didn't understand any content present with in the file, but a line attracted my attention and thought of trying it out. Following is what I did in Python console.<br /><a name='more'></a></div><blockquote><div align="justify"><i>Python 2.6.6rc1+ (r266rc1:83691, Aug 5 2010, 19:21:55) </i></div></blockquote><blockquote><i>[GCC 4.4.5 20100728 (prerelease)] on linux2</i></blockquote><blockquote><i>Type "help", "copyright", "credits" or "license" for more information.</i></blockquote><blockquote><i>&gt;&gt;&gt; import gtk</i></blockquote><blockquote><i>** Message: pygobject_register_sinkfunc is deprecated (GtkWindow)</i></blockquote><blockquote><i>** Message: pygobject_register_sinkfunc is deprecated (GtkInvisible)</i></blockquote><blockquote><i>** Message: pygobject_register_sinkfunc is deprecated (GtkObject)</i></blockquote><blockquote><i>/usr/lib/pymodules/python2.6/gtk-2.0/gtk/__init__.py:40: RuntimeWarning: tp_compare didn't return -1 or -2 for exception</i></blockquote><blockquote><i> from gtk import _gtk</i></blockquote><blockquote><i>Traceback (most recent call last):</i></blockquote><blockquote><i> File "/usr/lib/pymodules/python2.6/gtk-2.0/gi/__init__.py", line 27, in &lt;module&gt;</i></blockquote><blockquote><i> from gi.repository import GObject</i></blockquote><blockquote><i>ImportError: cannot import name GObject</i></blockquote><blockquote><i>&gt;&gt;&gt; </i><b><i>icon_theme = gtk.icon_theme_get_default()</i></b></blockquote><blockquote><b><i>&gt;&gt;&gt; icon_theme.get_search_path() </i></b></blockquote><blockquote><b><i>('/home/vasudev/.icons', '/home/vasudev/.local/share/icons', '$XDG_DATA_DIRS/icons', '/usr/share/akonadi/agents/icons', '/usr/share/akonadi/agents/icons', '$XDG_DATA_DIRS/pixmaps', '/usr/share/akonadi/agents/pixmaps', '/usr/share/akonadi/agents/pixmaps')</i></b></blockquote><blockquote><b><i>&gt;&gt;&gt; </i></b></blockquote>I have made the line which gave me a hint to find this fix bold. Clearly the normal Gtk icon folder path is not present in the image search path. (i.e <i>/usr/share/icon </i>where the iBus icon is present). I'm not sure whether this is a bug or normal behaviour but whatever it is below is the fix which makes the iBus icon reappear in tray.<br /><blockquote><i>ln /usr/share/icons/hicolor/scalable/apps/ibus-keyboard.svg ~/.local/share/icons/</i></blockquote>This is what above command did, it created a <a href="http://en.wikipedia.org/wiki/Hard_link" target="_blank" title="Hard Links">hard link </a>of the icon in one of the directory where Gtk module is looking for icon. Thats it relaunch the iBus and tray icon should be fixed by now ! :)</div>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>23 Dec 2011</span> &raquo; <a href=" / /2011/12/23/dh-make-font-a-font-package-helper-for-debian.html">>dh-make-font - A Font package helper for Debian</a></li>
    
      <li><span>14 Dec 2011</span> &raquo; <a href=" / /2011/12/14/my-journey-with-debian-and-floss-part-2.html">>My Journey with Debian and FLOSS - Part 2</a></li>
    
      <li><span>13 Dec 2011</span> &raquo; <a href=" / /2011/12/13/my-journey-with-debian-and-floss-part-1.html">>My Journey with Debian and FLOSS - Part 1</a></li>
    
  </ul>
</div>

        </div>
        <div class="fourcol last">
          <div class="widget">
            Connect to me on Friendica
            <script src="http://frndk.de/widgets/friends?k=37533857"></script>
          </div>
        </div>
      </div>
    </div>

    <div class="container footer">
      <div class="site">
        <div class="row">
          <div class="footer">
            <div class="contact">
              <p>
                (c) 2012 Vasudeva Kamath<br />
                The contents of this site are shared under <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="contact">CC-BY-SA-3.0 Unported</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <a href="http://github.com/copyninja"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
  </body>
</html>


