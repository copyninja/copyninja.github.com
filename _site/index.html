<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Random Ramblings</title>
    <meta name="author" content="Vasudev Kamath" />

    <!-- Normalize CSS -->
    <link rel="stylesheet" href="/blog/css/normalize.css" type="text/css"/>

    <!-- 1140 Grid CSS -->
    <link media="screen" rel="stylesheet" href="/blog/css/1140.css" type="text/css"/>

    <!-- styles.css -->
    <link media="screen" rel="stylesheet" href="/blog/css/styles.css" type="text/css"/>

    <!-- 1140 Grid CSS related javascript -->
    <script src="/blog/js/css3-mediaqueries.js" type="text/javascript"></script>

    
    <!-- syntax highlighting CSS -->
    <link rel="stylesheet" href="/blog/css/emacs.css" type="text/css" />

    <!-- Webfont url -->
    <link rel="stylesheet" href="/blog/fonts/stylesheet-bitstream.css" type="text/css"/>
    <link rel="stylesheet" href="/blog/fonts/stylesheet-angelina.css" type="text/css"/>

    <!-- Homepage CSS -->
    <link rel="stylesheet" href="/blog/css/screen.css" type="text/css" media="screen, projection" />

  </head>
  <body>

    <div class="container header">
      <div class="row">
        <div class="site">
          <div class="title">
            <a href="/">Random Ramblings</a>
          </div>
          <div class="subheading">
            Random thoughts shooting out of volatile mind
          </div>
        </div>
      </div>
    </div>
    <div class="container details">
      <div class="row">
        <div class="eightcol">
          <div id="home">

  <ul class="posts">
    
    <div class="front">
      
      
      <div align="right" class="date-container">FRIDAY, 23 DECEMBER 2011</div>
      
      
      
      <h1>>dh-make-font - A Font package helper for Debian <a class="glyph-permalink" href="/blog//2011/12/23/dh-make-font-a-font-package-helper-for-debian.html" title="Permanent link to: '>dh-make-font - A Font package helper for Debian'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">Recently I was doing the font transition for <i>ttf-indic-fonts</i> in <i>Debian-IN</i> team and by doing the same process again and again I really got bored. This boredom gave rise to this new tool called <i>dh-make-font. </i>I wish to see it in Debian but I don't know how the font and other packaging guru's of Debian react to my novice tool :). I won't call it tool because its nothing but a simple wrapper on top of <i>dh_make</i> which modifies the files and removes unnecessary file which is created by <i>dh_make</i>. I want to tell how you can use this tool to easily package a font according to the <i>Debian Font Task Force's </i>new packaging <a href="http://wiki.debian.org/Fonts/PackagingPolicy">policy</a>. I'll take the transition of <i>ttf-telugu-fonts</i> as an example here.</div><div style="text-align: justify;"><br /><i><b>Note that here I assume that reader has a basic knowledge on how to use dh_make and about the common files used in Debian packaging.</b></i><br /><br /></div><div style="text-align: justify;">First lets create a folder with name <i>telu-extra-1.0. </i>Since most of the font upstream in case of ttf-indic-fonts are inactive <i>Debian-IN </i>team itself acts as the upstream for these fonts so we don't have any tarballs to startwith.</div><br /><div style="text-align: justify;">Once we have created folder we will copy the font files from old ttf-telugu-fonts into <i>telu-extra-1.0</i> folder also we will copy the <i>90-ttf-telugu-fonts.conf</i> to our folder as <i>90-fonts-telu-extra.conf. </i>Now we have the basic package content ready lets give a shot to <i>dh-make-font</i></div><br /><blockquote class="tr_bq"><i>dh-make-font -c gpl3 --maint 'Debian-IN Team &lt;debian-in-workers@lists.alioth.debian.org&gt; telu-extra-1.0 </i></blockquote><div style="text-align: justify;">Now the hard part to explain what I did :). I just ran <i>dh-make-font</i> on <i>telu-extra-1.0</i> folder which we prepared above. As you can see <i>-c</i> switch is borrowed from the <i>dh_make</i> and all values it accepts are same. You can even give long switch <i>--copyright</i> if you wish :). <i>--maint </i>is the new option I've provided specific to <i>dh-make-font</i>. This option allows you to override <i>Maintainer </i>of package. If&nbsp; you don't override <i>Debian Fonts Task Force </i>will be the maintainer. Did you ask why? Yes you guessed it right I prepared this tool to encourage people to maintain fonts as part of <i>Debian Fonts Task Force </i>team.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Besides the above option you can also specify <i>-p / --package</i> option to specify package name and version this will be passed over to dh_make. If you get confused just pass <i>-h </i>or <i>--help </i>option to the dh-make-font it will give you details :)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">When you run above command we will see familiar questions appearing for us. Yes it is from <i>dh_make</i>, use your <i>dh_make</i> knowledge and proceed <i>dh_make</i> and <i>dh-make-font</i> will print few instructions on screen and our package is almost ready for Debian assuming <i>dh_make</i> didn't find something wrong in our setup. Now we need to do few minor stuffs.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">1. Edit the <i>control </i>file and add the short and long descriptions remove <i>fontforge</i> build dependency as we are not building fonts from source (.sfd files). </div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">2. Check the <i>install </i>and <i>links </i>file. Links file will be created only if there is a fontconfig related file getting installed. In our case it will be present</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">3. Edit the <i>copyright </i>file and insert copyright holders name for fonts also remove dh_make template from the file. Insert a valid dep5 <i>Format</i> uri</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Now run your package building command. In my case I will use pbuilder to get my package ready. Wasn't that helpful? No I'm asking seriously please leave your thoughts and suggestion through comments and help me improve the tool.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">This tool is actually helping me a lot. Within 20 minutes I could finish of 2 packages and get them into <i>Debian-IN </i>team repository. I hope it will help others too and also will get its place in <i>Debian Fonts Task Force team</i><br /><br />Now are you wondering where you can get the source? My bad here it is http://anonscm.debian.org/gitweb/?p=debian-in/dh-make-font.git;a=summary<i> </i></div></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">WEDNESDAY, 14 DECEMBER 2011</div>
      
      
      
      <h1>>My Journey with Debian and FLOSS - Part 2 <a class="glyph-permalink" href="/blog//2011/12/14/my-journey-with-debian-and-floss-part-2.html" title="Permanent link to: '>My Journey with Debian and FLOSS - Part 2'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;"><i>In my previous <a href="http://blog.copyninja.info/2011/12/my-journey-with-debian-and-floss-part-1.html">post</a> I told till I packaged fonts-pagul for which RFP was filed by Santhosh. Well after that Santhosh filed one more RFP to get Eeyek font which even though I claimed for Debian-IN but I couldn't complete till date :). Well reason is that I got new job and had to shift from my home town to Bangalore. In the mean time I did manage to get aspell-kn into Debian. Funny part is I'm the upstream author of this package and I myself maintain it in Debian too. aspell dictionary for Kannada was my first upstream project after SILPA and Pypdflib. </i></div><br /><div style="text-align: justify;"><i>Well know while explaining my life with Debian I forgot about other projects which I had done :). Yes some where in between all these packages I ported the Malayalam dictionary bot written by Santhosh and other SMC members for Kannada.</i> <i>I added some more improvements to cache the meaning retrieved from Kannada wiktionary also I used to cache the words for which I couldn't find the meaning in wiktionary with a hope to contribute it to Kannada wiktionary people so that they can add these undefined words and make Kannada wiktionary rich. But that never happened I couldn't give enough time for Kannada wiktionary bot which still lies at <b>kn.dict.bot [at] jabber [dot] org</b> serving meanings to people. Did I forgot to tell you that this bot has become a UNIX daemon and is monitored by monit service found in Linux. So its not only a UNIX daemon but a real zombie try killing it by giving non-sense words or whatever bot will die and will be back in a while like a Phoenix coming back from its Ash :). Psst. one secret thing I came to know is how naughty people are :D what nonsense words they send to this bot poor bot he nicely logged their email address and words :) Don't worry my intention was to give credits for undefined words but my plan was totally ruined by these people :).</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>The response I got from people for creating this bot was tremendous. I was flattered and got some more energy and inspiration to do more for people for FLOSS community. So let me continue my story now. After moving to Bangalore for a month or 2 I was totally disconnected from FLOSS and mostly from Internet. The whole misunderstanding was from my side that I thought laptop which I'll get from my new office will be installed with Debian as I am supposed to be working on the Debian itself but yes I was wrong instead I got Wind</i>ows 7 <i>Enterprise. Sigh the OS which I hate most :(. I was not supposed to install anything other than official stuff but I did install Firefox because IE really sucks and hence with help of Chatzilla I used to get online in IRC and meet my buddies :). Did you think I got an internet connection ? No all ISP's denied me from Internet connection because I'm staying as a Paying Guest! Now I know why we say *Mera Bharat Mahan*.</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>After my first salary I managed to buy a cheap Acer Travelmate model which is Linux friendly. It came with Linpus Linux which I removed and installed Debian Wheezy and I also managed to get my HTC Wildfire USB Teathering to work with it and installed stuffs required to build Debian package. Do you think I'm 3G? Err nooo I use only 2G a broken connection from Vodafone I know how much pain I daily undergo in using it :(.</i> <i>I said cheap but note that its Cheap in cost but for me its one the best hardware and works like a charm with Debian (no non-free blobs required!). </i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>So from Bangalore I continued my FLOSS/Debian work and started working on restructuring ttf-indic-fonts package which I self assigned to myself. Bubulle had told me that I had opened up a can of worm and now after starting to work on the package I really understand what he meant :). Its still not midway in the transition we in team Debian-IN lack man power for the work and some time I feel I'm getting buried by the burden I'm carrying</i>. <i>But I still manage to crawl under all weight to reach my destination :).</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>During this time I had also taken additional responsibility of conducting the Mini DebConf in Mangalore area and I now being located in Bangalore had all sort of trouble communicating with my friends over in NMAMIT Nitte and in the period of time <a href="http://wiki.debian.org/DebianIndia/MiniDebConf2011/MangaloreEdition">Mini DebConf Mangalore Edition</a> had become a International event which I never imagined it would become.</i> <i>In one way or other I got benefited by hosting the event I got 3 DD's to sign my PGP key which my path to become a DM easy. I don't want to explain the whole event of Mini Debconf because it would take its own space :).</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>After the event I applied for DM position my application can be found <a href="http://lists.debian.org/debian-newmaint/2011/11/msg00000.html">here.</a> Mine was the first application in the month of November and Kartik and Christian (bubulle) happily advocated me and I filed a bug report against debian-maintainer pseudo package by submitting a jetring changeset of my PGP key</i> <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=647914"><i>here</i></a>. <i>It took a while for my key to be included in debian-keyring and I officially became a Debian Maintainer on December 1 exactly one month after my application. Finally I achived one of my long term dream to become a Debian Maintainer :). Next I want to become a Debian Developer according to rules I need to wait 6 more months before I can apply to NM front desk :). Before that I want to upload my package to Debian by myself :) need to see how long it will take.</i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>In between my DM process I adopted dwm which was orphaned by its previous maintainer Kai Hendry. Its a very simple window manager which is younger brother of wmii. The whole reason to adopt was my long time dream to use window manager and love towards the <a href="http://suckless.org/">suckless project.&nbsp;</a></i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><i>Well after becoming DM a week spent without any productivity and on 9th I started back to my home town on a week long vacation. Now writing this post from my home and working on the "can of worm which I opened"&nbsp; :) Well this is a longish post but I wanted to finish this post here. Don't worry I'll write more of the parts as and when I have more story :).. Till then so long folks. </i></div></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">TUESDAY, 13 DECEMBER 2011</div>
      
      
      
      <h1>>My Journey with Debian and FLOSS - Part 1 <a class="glyph-permalink" href="/blog//2011/12/13/my-journey-with-debian-and-floss-part-1.html" title="Permanent link to: '>My Journey with Debian and FLOSS - Part 1'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;"><i>When I first started using Debian back in last half of 2009 I never thought I will go this far. Debian is one Linux distribution with which I felt comfortable after traveling across 10 distribution. My Linux interest started first back in 2007 when I was in engineering 3rd / 4th semester when the </i><i>Nirmitsu group from Bangalore conducted a day long work shop. This work shop showed me beauty of command line and existence of distribution called </i><i>Ubuntu and </i><i>Debian.</i></div><br /><div style="text-align: justify;"><i>Even though I was introduced first to </i><i>Ubuntu and even I got more than 20 CD's of </i><i>Ubuntu 6.04 it was not my first Linux distribution because of lack of internet connection and lack of the packages in</i><i> Ubuntu CD. My first Linux was </i><i>Red Hat Enterprise Linux 4 after that I moved to Red Hat Enterprise Linux 5 both these Linux were good and provided all packages in set of 4-5 CD's after that the curriculum wanted me to use Fedora and first one I tried was Fedora 8 for NCTUNS then Fedora 9 in between my college System Analyst introduced me to Mandriva 2008 and Mandriva 2009 but none of these Linux solved my problem for connecting to Internet and finally I landed on Ubuntu 8.10 which some time was allowing me to connect to internet but not always then I tried Zenwalk a Slackware derivative in the hope to getting connected to internet but there also I failed badly after searching a lot in the internet Ubuntu 9.04 finally allowed me to connect to internet. Mean while during college project I started using Debian which was introduced to us during Linux Habba conducted by then active Tech Sampada team and we had a local repo for then testing Debian Lenny (5.0) I finished my project with combination of Debian as server and Ubuntu (8.10) as client.</i></div><div style="text-align: justify;"><i><br /></i></div><div style="text-align: justify;"><i>After my college time I started working for a company in Mangalore and there I was first working on Windows as Blackberry Application developer and later moved Mac OS X 10.5 as iPhone developer during the time I had a strong urge to do something and contribute to FLOSS community but I didn't had much technical skills just like other engineers who will pass out of college. So I started contributing as a Kannada translator in KDE project under guidance of Shankar Prasad later joined launchpad and tried to help in Ubuntu-Kannada translation. In the mean while the changes in Ubuntu made me unhappy I used to lose the feel of Debian which was present in Ubuntu when I first started using it. With advent of Ubuntu 9.10 I threw away the Ubuntu from my home computer and started using Debian Lenny which had become stable during the time but the old components of Lenny dissatisfied me and I took a major turn and got Sidux (now known as AptoSid) and unstable derivative of Debian. Telling it derivative will be wrong because it was Debian itself with some modifications provided by AptoSid community. Now I could connect to Internet and get all the developer tools required. During this time I was introduced to <a href="http://thottingal.in/">Santhosh Thottingal</a> by my friend Laxmi Narayan Kamath and I slowly and steadily jumped into development of <a href="http://silpa.org.in/">SILPA</a> (Swathantra Indian Language Processing Application) using Python. Python had become my favorite language. I provided many optimization fixes to SILPA and some more bug fixes which made Santhosh think I'm a valuable asset and I became the Co-Developer of SILPA. I was working in some other projects Santhosh founded like Pypdflib and also contributed in some way to his WikiSource CD project also. During this same time I started a strong urge towards helping Debian but I really didn't know where to look for starting my journey towards Debian and in the nick of time I saw mail from <a href="http://j4v4m4n.in/">Praveen</a> to the SMC list stating he is going to conduct a packaging work shop the Saturday night and I replied asking If I can join and he happily welcomed me. And thus under guidance of Praveen I started learning Debian packaging and Pypdflib (Santhosh's project) was the first one I choose to package being a Python library and I'm being unaware of Python packaging policy I came across many problems and Praveen by himself not able to solve connected me to <a href="http://ftbfs.wordpress.com/">Kartik Mistry</a> one of the most active India Debian Developer who helped me solve the problem and happily uploaded my first Debi an package to Debian (after 1 rejection from the FTP Masters) and I was the happiest man to be finally being part of Debian. The package still lies in the experimental branch of Debian which shows my sheer ignorance towards the package? (just kidding) Pypdflib is not actively under developement after we lost our most active developer Jinesh&nbsp; recently. I still intend to move it to unstable from experimental. With this package I also became member of Debian-IN team, the team which maintains Indian language related fonts and other packages.</i><br /><i><br /></i><br /><i>After getting my first package into Debian my urge to package became more and more and I started searching for a good package until I came across the IndUni fonts which first I thought some sort of Indic language fonts untill I talked with the upstream author John Smith who clarified its Indology symbols inside the fonts finally I packaged it and because of this font I joined pkg-fonts-devel team and came to know the most respected person in Debian, Christian "bubulle" Perrier or in short we call him bubulle :).</i><br /><i><br /></i><br /><i>Now recalling stuffs is bit difficult but I think after this the Open Source Federated social network Diaspora* became so famous amongst us the hackers that we decided that we should package it for Debian. It was difficult because it required so many gems to package and we lacked the man power and hence Praveen started advocating people about Diaspora* and try to teach people about ruby packaging and get them to package a gem. But he was not successful people at first show very much interest file ITP and some even go till finish package and send RFS and then disappear. So this created some chaos in pkg-ruby-extras team than helping it. And finally Lucas clearly mentioned he won't sponsor any Diaspora* packagers unless they have helped in pkg-ruby-extra transition and to undo what happened because of him Praveen started helping in transition of gems in pkg-ruby-extras team. In this whole Diaspora* packaging fuss I'm the only one who managed to get 2 new gems into Debian (ruby-polyglot and ruby-bcrypt) and also helped in transition of ruby-hmac. So now packages maintained by me in Debian reached to 5. Also during this time I floated away from Diaspora* to find a new and better federated home at <a href="http://friendica.com/">Friendica</a> more about this later.</i><br /><i><br /></i><br /><i>Mean while Santhosh filed RFP's for getting <a href="http://www.kiwix.org/">Kiwix</a> into Debian and I happily ITPed it back in March or April which is still a pending package from my side first due to build tool bug and now due to the reason package depends on xulrunner-1.9.1 which is no more in Debian and the upstream is still working on making it either independent of Xulrunner or make it depend on higher version of Xulrunner. The whole thing I learned during packaging fonts-johnsmith-induni and kiwix is how Debian actually helps improving the upstream. Whole lesson learned is have always a good relation with upstream.</i><br /><i><br /></i><br /><i>Next was one more RFP by Santhosh for getting Pagul fonts for Saurashtra language into Debian which I claimed for Debian-IN and which is now in Debian. ( Now to continue my story in Debian give me a second I need to have a peek at what package I'm maintaining ;) ). Well I think post is already too longish so let me split into 2. Till the next part happy flossing hackers!</i></div></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SUNDAY, 11 DECEMBER 2011</div>
      
      
      
      <h1>>Kannada gets new fonts <a class="glyph-permalink" href="/blog//2011/12/11/kannada-gets-new-fonts.html" title="Permanent link to: '>Kannada gets new fonts'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;"><i><b>Just some background on fonts in Kannada</b></i> </div><div style="text-align: justify;">Kannada (ISO language code - kn) is widely spoken language in Karnataka. Even though we are the IT hub of India advancement of Kannada in computers is very very less. But there was some effort from some of the Open source community to make Kannada language usage in computers more and more user friendly. Of those efforts to provide a Unicode font to Kannada one was taken up by IISC Bangalore which gave to fonts <i>Kedage </i>and <i>Malige </i>to us but because of some controversies (which I really don't know clearly) they just GPLed both fonts and walked away. On the other hand Red Hat is maintaining <i>Lohit </i>font family and provided us most bug free <i>Lohit Kannada. </i>But most of the Linux geeks are not happy with appearence of <i>Lohit Kannada </i>so every one&nbsp; is happy to use <i>Kedage </i>besides of many bugs.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">As I was restructuring the <i>ttf-indic-fonts </i>for Debian I was looking at the bugs reported against the package and I came across the bugs reported against <i>Kedage </i>and I asked my friend <a href="http://aravindavk.in/">Aravinda</a> if he can fix them and maintain the font. He readily agreed and fixed the bugs in both <i>Kedage </i>and <i>Malige </i>and created repo of both on github. Since maintaining the <i>Kedage </i>and <i>Malige </i>itself is not possible because we don't have any consent from upstream finally he decided to call that a fork and now <i>Kedage =&gt; Gubbi </i>and <i>Malige =&gt; Navilu </i>both fonts are now licensed under Open Font License 1.1 (OFL) and is available in Github [1] [2].<br /><br /><i>Gubbi -&nbsp;</i> <i>Old Kedage with new bug fixes and rendering issues fixed</i><br /><i>Navilu- Old Malige (Hand written fonts) with bug fixes and rendering issues fixed </i></div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">I'm happy to announce that we now have a well maintained beautiful free fonts for Kannada and all thanks goes to Aravinda. And wait a bit more folks we have more to come :)</div><br />[1] http://github.com/aravindavk/Gubbi<br />[2] http://github.com/aravindavk/Navilu<br /><br /><br /></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">MONDAY, 14 NOVEMBER 2011</div>
      
      
      
      <h1>>git-buildpackage: Renaming a package in Git repo <a class="glyph-permalink" href="/blog//2011/11/14/git-buildpackage-renaming-a-package-in-git-repo.html" title="Permanent link to: '>git-buildpackage: Renaming a package in Git repo'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">Just to give a background I've been working on renaming <i>ttf-indic-fonts </i>package in <i><a href="http://alioth.debian.org/projects/debian-in">Debian-IN</a> </i>team. And after packaging the <i>Lohit and Samyak fonts </i>I sent a mail to <i>debian-in-workers </i>mailing list giving the current status. And after a short <a href="http://lists.alioth.debian.org/pipermail/debian-in-workers/2011-November/001734.html">discussion</a> <i>Christian bubulle Perrier</i> suggested me to use ISO 15924 language codes rather than ISO script code (2 letters).</div><br /><div style="text-align: justify;">We are now using the Git VCS for maintaining the packages and as known the <i>git-buildpackage </i>uses a branch called <i>pristine-tar&nbsp; </i>and <i>upstream </i>branch to regenerate the <i>orig tar ball. </i>So if you only change the package name in <i>control </i>and <i>changelog </i>and <i>git-buildpackage </i>fails badly saying it can't create <i>orig tar ball</i>. So do the following</div><div style="text-align: justify;"><br /></div><blockquote class="tr_bq"><i>git checkout pristine-tar</i></blockquote><blockquote class="tr_bq"><i>git mv package_version.orig.tar.gz.delta newpackage_version.orig.tar.gz</i>.<i>delta</i><br /><i>git mv package_version.orig.tar.gz.id newpackage_version.orig.tar.gz.id</i></blockquote><div style="text-align: justify;"><i> </i>Here <i>package</i> is old package name and <i>newpackage</i> is new name for the package. Next commit the changes. Now the important point if you simply write <i>renamed the package </i>as new commit message the when you run <i>git-buildpackage </i>you will get following warning</div><blockquote class="tr_bq"><i>git-buildpackage: warning renamed pristine-tar data unable to detect compression type assuming gzip</i></blockquote><div style="text-align: justify;">After struggling a lot finally figured that <i>pristine-tar </i>command uses commit message to assume the compression type. Yes thats how pristine-tar is working so you should write commit message similar to the default one created by <i>git-import-dsc </i>when first importing package to repository. To be more precise commit message should be some thing like below.</div><blockquote class="tr_bq"><div style="text-align: justify;"><i>pristine-tar data for newpackage_version.orig.tar.gz</i></div></blockquote>Replace is <i>newpackage_version.orig.tar.gz </i>with actual orig tar ball name and in case your package is bzip then replace gz with bz2. And you have successfully renamed the package in git repository.</div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">THURSDAY,  1 SEPTEMBER 2011</div>
      
      
      
      <h1>>Tutorial: Cross compiling C application to i386 architecture <a class="glyph-permalink" href="/blog//2011/09/01/tutorial-cross-compiling-c-application-to-i386-architecture.html" title="Permanent link to: '>Tutorial: Cross compiling C application to i386 architecture'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">Recently I had to compile an C application for i386 architecture but I was running x86_64 Debian Wheezy. The libraries used for linking to create the final application where compiled for i386 arch and GCC was skipping them as it was not compatible one. I knew it is possible to cross compile using GCC but I was a noob to cross compilation. Searching in the internet took me to sites which suggests use of tool chains like binutils. But my program was too simple to undergo through all this. Finally I posted finally this question [1] on StackOverflow, and thanks to guys at Stackoverflow I got immidiate answer!</div><br /><div style="text-align: justify;">Well yeah as told its pretty easy for corss compiling for i386 architecture in gcc only thing is needed is you add <i><b>-m32</b></i>&nbsp; in CFLAGS of your make file. You may also add <i><b>-march=i386</b></i> to optimize it for i386 architecture. Yes you guessed it right this won't work simply you need to have entire i386 compatible libc and libc-dev files so if you are on Debian based system then use following command to install it.</div><blockquote><i>sudo apt-get install ia32-libs ia32-libs-dev libc6-dev-i386</i></blockquote><div style="text-align: justify;">If you want to know about other distro's well you better refer your distribution documentation.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Yes this will also works in <i>clang </i>compiler. </div><br />[1] http://stackoverflow.com/questions/7219256/cross-compiling-a-c-application-using-gcc<br /><br />Signing off<br />-- Vasudev</div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SUNDAY,  7 AUGUST 2011</div>
      
      
      
      <h1>>Tutorial: Sharing 3G Internet Connection Using Laptop Wifi <a class="glyph-permalink" href="/blog//2011/08/07/tutorial-sharing-3g-internet-connection-using-laptop-wifi.html" title="Permanent link to: '>Tutorial: Sharing 3G Internet Connection Using Laptop Wifi'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">I've got a new laptop and plan to buy a new internet connection. Since me and my room mate are planning to share the cost of internet we are now faced with a problem of how to share a single datacard connection b/w us. After searhching a lot in the internet came accross this article [1]. But the new isc-dhcp-server package in Debian was not running for some reason so thought of going in my own way using dnsmasq as dhcp and dns server for peer laptop. Below is what I did.</div><br /><div style="text-align: justify;">First step is to install dnsmasq. Below is the command for installing the&nbsp; same for Debian based distro. For other distro please follow your distro documentation</div><br /><blockquote><i>apt-get install dnsmasq</i></blockquote><div style="text-align: justify;">Next step is configuring the dnsmasq as dhcp and dns cache. First rename the original configuration file <i>dnsmasq.conf</i> found in /etc to <i>dnsmasq.conf.orig</i> and create new empty file in place of it</div><br /><blockquote><i>sudo mv /etc/dnsmasq.conf /etc/dnsmasq.conf.orig</i> </blockquote><blockquote><i>sudo touch /etc/dnsmasq.conf</i> </blockquote>Now add this to your dnsmasq.conf.&nbsp; <br /><script src="https://gist.github.com/1130151.js"> </script><br /><div style="text-align: justify;">Modify the file as required. I assume the reader knows basics of dhcp and dns stuffs. If you didn't understand few stuffs ping me or use man page which provides all the information about the commands.</div><br /><div style="text-align: justify;">After editing dnsmasq.conf now restart the dnsmasq daemon using following command</div><br /><blockquote><i>sudo /etc/init.d/dnsmasq restart # Debian</i><br /><i>sudo /etc/rc.d/dnsmasq restart # Arch</i></blockquote><div style="text-align: justify;">We need to have a small script to enable the internet sharing. This script is originaly taken from [1] I've only enabled the wep encryption to secure the access point</div><br /><script src="https://gist.github.com/1130164.js"> </script><br /><br /><div style="text-align: justify;">You should run this script as root and once executed you should be able to see the network access point!. Next step is testing B.A.T.M.A.N integration, till then cya..</div><br />Reference:<br />[1] http://www.go2linux.org/linux/2011/03/share-your-3g-internet-connection-over-wifi-linux-ipod-touch-925 <br />[2] http://element.edoceo.com/howto/dnsmasq<br /><br /></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SUNDAY, 15 MAY 2011</div>
      
      
      
      <h1>>Tutorial: Packaging Ruby Gem in Debian <a class="glyph-permalink" href="/blog//2011/05/15/tutorial-packaging-ruby-gem-in-debian.html" title="Permanent link to: '>Tutorial: Packaging Ruby Gem in Debian'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="color: red; text-align: justify;"><i><b>Disclaimer: I'm not a ruby programmer I do ruby packaging because I want to help out the pkg-ruby-extras in their transition to new policy in Wheezy</b></i></div><br /><div style="text-align: justify;">To start with I came to package ruby because we (me and some of my friends) wanted to package Diaspora for Debian but later figured that there is lot needs to be done in the <i>pkg-ruby-extras</i> so thought of helping the team which will intern help in packaging Diaspora.</div><div style="text-align: justify;">Before I start here is the new policy for Ruby in Wheezy [1] and here is the current status of ruby packages in Wheezy [2] this is regernerated daily.</div><br /><div style="text-align: justify;">New policy uses a tool called <i>gem2deb</i> which makes it very easy to package a gem (of course it only creates skeleton package :)). If you are on testing/unstable you can install the tool by issuing following command</div><blockquote><i># apt-get install gem2deb</i> </blockquote><div style="text-align: justify;">If not you can install it from Github using following commands</div><br /><blockquote><pre style="font-family: inherit;"><i>git clone git://github.com/ln/gem2deb.git<br /><span class="anchor" id="line-2"></span>cd gem2deb<br /><span class="anchor" id="line-3"></span>rake install<br /><span class="anchor" id="line-4"></span>then, cd to some temporary place, and do:<br /><span class="anchor" id="line-5"></span>gem2deb rdiscount # native gem<br /><span class="anchor" id="line-6"></span>or:<br /><span class="anchor" id="line-7"></span>gem2deb i18n # pure-ruby gem</i></pre></blockquote><br /><div style="text-align: justify;">Once you have installed gem2deb its a 3 step task, follow the following 3 steps to get a rough package source ready of a gem</div>1. Download the gem using following command<br /><blockquote><i>gem fetch polyglot</i></blockquote>2. Convert the <b><i>.gem</i></b> file to <b><i>.tar.gz</i></b> using following command<br /><blockquote><i>gem2tgz polyglot-0.3.1.gem</i></blockquote>3. Now create a rough Debian package source using following command<br /><blockquote><i> dh-make-ruby polyglot-0.3.1.tar.gz</i></blockquote><div style="text-align: justify;">Actually the <i>pkg-ruby-extras</i> team suggests using gem2deb in the second step itself which tries to build the gem along with creating Debian package source for it. But I prefer going this way and build the package once I'm completely finished with packaging related stuffs for the package (i.e editing copyright control changelog and other stuffs). If you think you are lazy to follow the above 3 steps then you should checkout the script which I've written. All you need to do is give the gem name(s) to the script and it does the above 3 steps for you.</div><br /><script src="https://gist.github.com/973217.js"> </script><br /><br /><div style="text-align: justify;">Once the above 3 steps and editing task for the package is done go ahead and build the package using <i>pbuilder. </i>Check the resulting package for lintian warnings and errors (You can ignore warning regarding <i>ruby-version</i> field for now there is already a wishlist bug reported against lintian for this). If you are a new maintainer like me go ahead and upload the package to mentors.debian.net and send RFS to <i>debian-ruby at lists dot debian dot org </i>and wait for the review :) (and do promptly follow up to the replies).<br /></div><div style="text-align: justify;">Reference for this tutorial is in RubyInWheezy page [1]. After reading this tutorial if you are Debian user and passionate about Debian I hope you will help out <i>pkg-ruby-extras</i> in this transition :)</div><br />[1] <a href="http://wiki.debian.org/Teams/Ruby/RubyInWheezy">http://wiki.debian.org/Teams/Ruby/RubyInWheezy</a><br />[2] <a href="http://pkg-ruby-extras.alioth.debian.org/wheezy/details.html">http://pkg-ruby-extras.alioth.debian.org/wheezy/details.html</a></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">FRIDAY,  6 MAY 2011</div>
      
      
      
      <h1>>Tutorial: Creating Aspell Dictionaries <a class="glyph-permalink" href="/blog//2011/05/06/tutorial-creating-aspell-dictionaries.html" title="Permanent link to: '>Tutorial: Creating Aspell Dictionaries'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">I recently created aspell-kn dictionary and thus I became author for atleast one upstream project ;).. In this tutorial I'm just going to summarize the steps involved in creating an aspell dictionary for a particular language (in my case Kannada).</div><br /><a name='more'></a><br /><br /><div style="text-align: justify;">&nbsp;First step is to get the latest source of aspell-lang from cvs. Yes aspell still uses cvs but we need the source only to get a map file for our language and belive it won't take much time even on slow connection (like mine) to checkout the source. Use following command to checkout the aspell-lang.</div><br /><blockquote><i>cvs -z3 -d:pserver:anonymous@cvs.savannah.gnu.org:/sources/aspell co aspell-lang</i></blockquote><div style="text-align: justify;">&nbsp;The above command will create aspell-lang in the directory where you executed it. Now change to <i><b>aspell-lang/maps&nbsp; </b></i>directory. This directory contains language map files. Look for the map file for your language. If your language has Unicode charachter set the map file should <i>u-<lang>.txt</lang></i>. In my case the file was <i>u-knda.txt</i>. Open up the file in any editor and check if you need to add anything more than what is already in the file. This file actually maps 128-character Unicode space for the language to the space 128-255. Normally whatever content inside this file should be sufficient but for Indian scripts we require to map 2 Unicode control character <a href="http://en.wikipedia.org/wiki/ZWJ">ZWJ</a> and <a href="http://en.wikipedia.org/wiki/ZWNJ">ZWNJ</a> This is how u-knda.txt looks after addition of these 2 control characters<br /><br /><blockquote><i>0x11 = U+200C<br />0x12 = U+200D<br />0x80..0xFF = U+0C80..U+0CFF</i></blockquote>Next step is to generate the <i>cmap</i> and <i>cset</i> file for the language. Under aspell-lang directory there is a perl script "mkchardata"&nbsp; use this to generate <i>u-<lang>.cmap</lang></i> and <i>u-<lang>.cset. </lang></i>In my case I used following command to generate <i>u-knda.cmap</i> and <i>u-knda.cset</i><br /><blockquote><i>perl mkchardata maps/u-knda.txt</i></blockquote>&nbsp;Now create a working folder for new directory <i>aspell-<langcode></langcode></i> in my case <i>aspell-kn, </i>copy the u-<lang>.cmap and u-<lang>.cset to that directory .cmap and .cset is not mandatory file but I think if your language uses Unicode character set then these files are mandatory. Also create a <i>misc </i>and copy u-<lang>.txt in to this folder.</lang></lang></lang><br />Next we need to create <i>info </i>file. This file contains information about the dictionary. Below is the info file I used for aspell-kn<br /><script src="https://gist.github.com/959314.js?file=info"></script><br />As you can see all fields are self explantory. One thing I would like to mention here is <i>data-file </i>field. If your language needs cset and cmap files then use this field to give their name.<br />Next you need to create <i>Copying</i> file describing the terms of dictionary usage. If you are using license other than standard license then licesne text should be placed in <i>COPYING </i>file. For GPL licences this file will be created during processing phase.<br />Next important file is <i><lang>.dat </lang></i>format of this file is described in aspell manual under chapter <i>"Adding support for new language" </i>[1]. Below is the <i>kn.dat</i> which I created.<br /><script src="https://gist.github.com/959373.js?file=kn.dat"></script><br /><br />Now we have all the required files. Copy <i>proc</i> file from <i>aspell-lang</i> (cloned from cvs) to your working directory and run it as shown below<br /><blockquote><i>./proc create</i></blockquote>This will create <i>configure</i> script and <i>Makefile.pre</i> finally copy the word list file to working directory and name it as <i><lang>.wl</lang></i>. Word list file contains list of words seperated by new lines. Now run the following commands<br /><blockquote><i>./configure</i><br /><i>make</i></blockquote>This will convert the wl file to cwl (Compressed wordlist file using prezip tool). also creates a rws file. Now the dictionary is ready and to publish the dictionary to world use <i>make dist</i> this will create a tarball for distribution. Note that tarball doesn't include .wl file it only contains cwl file.<br /><br />I created aspell-kn refering to the tutorial on Indlinux wiki [2]. The only reason of rewriting the entire tutorial is I felt the tutorial given in Indlinux wiki is not suitable for beginer (I being the one during creation of aspell-kn had to struggle a lot to get everything together).<br /><br />The source for aspell-kn is available at [3] and source for the Kannada wordlist is available at [4] aspell-kn can be downloaded from [5] and will be soon packaged for Debian :) <br /><br />[1] http://aspell.net/man-html/Adding-Support-For-Other-Languages.html#Adding-Support-For-Other-Languages<br />[2] http://indlinux.org/wiki/index.php/IndicSpellchecker <br />[3] https://gitorious.org/indic-projects/aspell-kn<br />[4] https://gitorious.org/indic-projects/wordlist<br />[5] http://sanchaya.net/downloads/aspell-kn/</div></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SATURDAY, 26 MARCH 2011</div>
      
      
      
      <h1>>Tutorial: Python and C Coupling Continued (Dhvani with Python) <a class="glyph-permalink" href="/blog//2011/03/26/tutorial-python-and-c-coupling-continued-dhvani-with-python.html" title="Permanent link to: '>Tutorial: Python and C Coupling Continued (Dhvani with Python)'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">In my previous <a href="http://vasudevkamath.blogspot.com/2010/07/python-and-c-coupling.html">post</a> I gave a brief tutorial on how to use C shared library in Python using ctypes module. The example for the tutorial was very simple and didn't involve any complex data structures. In this post I'll be giving a brief insight on how to use <i>ctypes</i> to interact with C libraries involving complex data structures and function pointer. In this example I'll be using <a href="http://dhvani.sourceforge.net/">Dhvani</a> an Indian Language TTS system. Here is the <a href="http://dhvani.sourceforge.net/doc/apis.html">Dhvani API reference. </a></div><br /><blockquote>&nbsp;&nbsp;&nbsp; <i><b>Problem:</b></i> Use dhvani API's to genreate speech or a output file in Python</blockquote><br /><a name='more'></a><br /><br /><div style="text-align: justify;">Let's have a look at the Dhvani API reference (link given above). We have a structure&nbsp; <i><b>dhvani_options</b></i> which is very important part of dhvani API. Below is the structure</div><br /><blockquote>&nbsp;<i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp; typedef struct {</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; struct dhvani_VOICE *voice; /* not used now.. for future use.*/</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float pitch;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; float tempo;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int rate;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dhvani_Languages language;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int output_file_format;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int isPhonetic;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int speech_to_file;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; char* output_file_name;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t_dhvani_synth_callback* synth_callback_fn;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; t_dhvani_audio_callback* audio_callback_fn;</span></span></i><br /><i><span style="font-size: x-small;"><span style="font-family: Arial,Helvetica,sans-serif;">&nbsp;&nbsp;&nbsp; } dhvani_options;</span></span></i></blockquote><br />&nbsp;And an enum <i>dhvani_ERROR </i><br /><br /><blockquote>&nbsp;<i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp; typedef enum {</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DHVANI_OK = 0,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DHVANI_INTERNAL_ERROR = -1</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp; } dhvani_ERROR;</span></i></blockquote><br /><div style="text-align: justify;">Now if we carefully observe the dhvani_options structure it involves a few complex data structure like <i>dhvani_VOICE</i> (structure) <i>t_dhvani_synth_callback</i> and <i>t_dhvani_audio_callback</i> and an enum <i>dhvani_Languages</i>. Besides this all others are basic data structures. I had to hack the dhvani source code to see what are this complex data structures are and below is the snippets which I found in dhvani source code.</div><br /><blockquote><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp; typedef enum {</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HINDI = 1,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MALAYALAM = 2,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TAMIL = 3,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; KANNADA = 4,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ORIYA = 5,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PANJABI = 6,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; GUJARATI = 7,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TELUGU = 8,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BENGALI = 9,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MARATHI = 10,</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PASHTO = 11</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp; } dhvani_Languages;</span></i><br /><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp; typedef int (t_dhvani_synth_callback) (int);</span></i><br /><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">&nbsp;&nbsp;&nbsp; typedef int (t_dhvani_audio_callback) (short *, int); </span></i></blockquote><br /><i>&nbsp;dhvani_VOICE</i> structure was never defined it was meant only for future use, so it spared me some time :). I also found one more enum in the source which are used by the API's. I'm listing them below.<br /><br /><blockquote>&nbsp;<i style="font-family: Arial,Helvetica,sans-serif;"><span style="font-size: x-small;">&nbsp;&nbsp; typedef enum {</span></i><br /><i style="font-family: Arial,Helvetica,sans-serif;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DHVANI_OGG_FORMAT = 0,</span></i><br /><i style="font-family: Arial,Helvetica,sans-serif;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DHVANI_WAV_FORMAT</span></i><br /><i style="font-family: Arial,Helvetica,sans-serif;"><span style="font-size: x-small;">&nbsp;&nbsp;&nbsp; } dhvani_output_file_format;</span></i></blockquote><br /><div style="text-align: justify;">So we need to define few enums and a dummy strucute and 2 function pointers in Python before we can define <i>dhvani_options</i> structure in Python. Look at the below snippet</div><script src="https://gist.github.com/888072.js"></script><br /><br /><div style="text-align: justify;">Since there is nothing equivalent to enums in Python we just define constants with int value to match enumeration in C. We are using <i>CFUNCTYPE</i> from <i>ctypes</i> library to define the callback function which are nothing but function pointers in <i>CFUNCTYPE</i> allows us to specify the <i>return type</i> of the functions and the <i>arguments</i> to the function. Next is <i>dhvani_VOICE</i> structure as you can see its just a place holder.</div><div style="text-align: justify;">So now we have defined all the required data structures its time we define the main structure of dhvani i.e <i>dhvani_options. </i>Below is the snippet of code for defining <i>dhvani_options</i> in Python.</div><script src="https://gist.github.com/888111.js"> </script><br /><br /><div style="text-align: justify;">To define a structure we need to create a class that inherits from <i>ctypes.Structure</i> clas. All the fields of the strucutre are defined as the list of tupples <i>__fields__</i>. Each tuple contains a string specifying name of the field in C structure and its type. The new type you can see here is <i>POINTER</i> which is a ctype function for C Pointer type. Rest of the code is self explanatory.</div><br />With this we have all the required data structures defined in Python. Next step is to find the required functions and map them to Python equivalent function calls. Inspecting the dhvani API reference we&nbsp; see that function calls <i>dhvani_say</i> and <i>dhvani_speak_file</i> are required to generate audio from the text. Below is the prototype of these functions.<br /><blockquote><div style="font-family: Arial,Helvetica,sans-serif;"><span style="font-size: x-small;"><i>dhvani_ERROR dhvani_say(char *, dhvani_options *);</i></span></div><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;"><i> dhvani_ERROR dhvani_speak_file(FILE *, dhvani_options *);</i></span></blockquote><div style="text-align: justify;"><i>&nbsp;dhvani_say</i> is a simple function but <i>dhvani_speak_file</i> expects <i>FILE</i>* as first argument!! Now that is problematic, we don't have anything equivalaent to C's <i>FILE*</i> structure. After searching for a while finally I found this <a href="http://stackoverflow.com/questions/3794309/python-ctypes-python-file-object-c-file">answer</a>. The trick is use Python's <i>file</i> object to open the file and use <i>fileno() </i>API of <i>file</i> object to get back the integer file descriptor, then use <i>fdopen</i> function call provided by standard C library to get back <i>FILE*</i> structure for the descriptor. Since dhvani uses standard C library shared library of dhvani will contain reference to <i>fdopen</i> so next step is to map <u><i>fdopen</i></u> to Python function call. Below is prototype of <i>fdopen</i> which I'll be using.</div><blockquote><i><span style="font-family: Arial,Helvetica,sans-serif; font-size: x-small;">FILE *fdopen(int fd, const char *mode);</span></i></blockquote>&nbsp;And below is the snippet for mapping all these 3 functions to Python<br /><br /><script src="https://gist.github.com/888127.js"> </script><br /><br /><div style="text-align: justify;">As you can see wherever <i>FILE*</i> was used in C functions I used <i>c_void_p</i> i.e void pointer, this is mainly because pointers all have same memory size the type only indicates what type of content is present in the memory location pointed by the pointers. So in this case I'm telling python run-time that its void pointer but during the call where prototype expects (FILE*) it will be automatically typecasted (at least I assume so if you have better explanation please comment)</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">So we have everything read now and we can directly use dhvani API's to get the audio generated for any Indian Language from our python code. Below is the code of tts module of <a href="http://silpa.org.in/">SILPA</a> which now uses dhvani shared library and is out of its experimental status.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;"><script src="https://gist.github.com/888132.js"> </script><br /><br />I won't be explaining rest of the code here as its self explanatory and my job was to explain the important part i.e coupling dhvani library with Python. And that is done :). Please give the suggestions in comments :)<br /><br /><b style="color: red;"><i>P.S: The entire code may not be directly usable as it has code required to integrate it with SILPA</i></b><br /><br />-- Vasudev</div></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SUNDAY, 20 FEBRUARY 2011</div>
      
      
      
      <h1>>Tutorial: Python module packaging for Debian <a class="glyph-permalink" href="/blog//2011/02/20/tutorial-python-module-packaging-for-debian.html" title="Permanent link to: '>Tutorial: Python module packaging for Debian'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">In this post I would like to share my experience on packaging <a href="https://savannah.nongnu.org/projects/pypdflib">my first python module</a> for Debian. Its still waiting in the <a href="http://ftp-master.debian.org/new.html">new queue</a> to enter experimental branch of Debian. I would like to give a brief overview of the python module packaging here. I assume the reader knows basics of python module packaging and has gone through the Debian New Maintainers guide.</div><div style="text-align: justify;">For Python module packaging first step is to get the source from the <a href="http://pypi.python.org/pypi">pypi </a>. In my case since I was one of the developer for pypdflib, I just ran the below command to get tar.gz file for pypdflib</div><blockquote><div style="text-align: justify;"><i>python setup.py sdist </i></div></blockquote><div style="text-align: justify;">The archive will be created under <i>dist</i> folder. In my case archive name was <i>pypdflib-0.1.a2.tar.gz</i>. Now copy that to a folder where you want to create the package.</div><div style="text-align: justify;"><br /></div><div style="text-align: justify;">Now we need to install a tool called <i>python-stdeb - Python to Debian source package conversion utility. </i>Run the below command to get the package installed</div><blockquote><div style="text-align: justify;"><i>sudo aptitude install python-stdeb</i></div></blockquote><div style="text-align: justify;">&nbsp;Now run the below command to create a .dsc and module source with debian folder template inside it.</div><blockquote><i>py2dsc -m 'Your Name <your@email>' package-version.tar.gz</your@email></i></blockquote><div style="text-align: justify;">&nbsp;Replace the fields appropriately it will create a folder <i>deb_dist</i> in the same directory and the extracted source with debian folder template will be placed under it. </div><blockquote><i>deb_dist</i><br /><i>&nbsp; |</i><br /><i>&nbsp; |___ package-version</i></blockquote><div style="text-align: justify;">Now enter debian directory and edit the <i>control</i> <i>changelog</i> and <i>copyright</i> files to suit your needs. Make the <i>copyright</i> file in&nbsp; <a href="http://dep.debian.net/deps/dep5/">dep5</a> machine readable format. Also I noted that for some reason <i>source/format</i> file under debian directory contained 1.0 (native format). If so please change it to contain the following lines</div><blockquote><i>3.0 (quilt)</i></blockquote><div style="text-align: justify;">That is almost it now running the following command will create the package for your module</div><blockquote><i> debuild</i></blockquote><div style="text-align: justify;">If <i>lintian</i> complaints about issue please fix them, one important thing in Debian packaging is your package should always be lintian clean. </div><br /><div style="text-align: justify;">Now for some special cases there is chance that when you may have to do some extra work. In my case following where happening.</div><div style="text-align: justify;">1. Original source (package-version.orig.tar.gz) was getting modified mainly because of packagename.egg.info folder which is created during compilation.</div><div style="text-align: justify;">2. I had some samples for my module which should be installed as examples.</div><br /><div style="text-align: justify;">For the first problem solution was to override dh_clean section. I added the following lines to my rules file</div><br /><blockquote><i>override_dh_clean:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dh_clean<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rm -rf setuptools_git-0.3.4-*<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rm -rf src/pypdflib.egg-info</i></blockquote><div style="text-align: justify;">What it does is it executes the remove command on 2 folder which were not cleaned automatically by dh_clean.</div><br /><div style="text-align: justify;">For second problem the solution was overriding dh_installexamples section to install my examples manually.</div><br /><blockquote><i>override_dh_installexamples:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dh_installexamples -p python-pypdflib samples/*</i></blockquote><div style="text-align: justify;">I didn't put those under /usr/bin/ folder since those examples are not a fully featured tools during the creation. I'll be adding them as tools under /usr/bin using <i>link</i> file in the next release.</div><br />Below is my complete rule file for your reference.<br /><br /></div><script src="https://gist.github.com/836035.js"> </script><br /><br />I thank <a href="http://j4v4m4n.in/"><i>Praveen A</i></a>&nbsp; for guiding me and teaching Debian packaging and <a href="http://qa.debian.org/developer.php?login=kartik"><i>Kartik Mistry</i></a> for helping me in packaging pypdflib and sponsoring it in Debian. My package source now lies in <i>Debian-IN</i> team svn repository. If there are any mistakes please do comment about them :).<br /><br />Reference: <a href="http://meetbot.debian.net/debian-women/2010/debian-women.2010-12-02-20.02.log.html">Debian Woman Python packaging session</a></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SATURDAY,  4 DECEMBER 2010</div>
      
      
      
      <h1>>Conditional "import" in Python <a class="glyph-permalink" href="/blog//2010/12/04/conditional-import-in-python.html" title="Permanent link to: '>Conditional "import" in Python'">&diams;</a></h1>
      
      ><div style="text-align: justify;">Normally in Python when we try to import a module and module doesn't exist the interpreter will throw&nbsp; <i>ImportError</i>, this is a normal behavior . But in some cases like when Python version changes some functions are moved from one module to other and sometime the module names itself are changed. For eg. in Python 2.6 we have <i>urllib</i> <i>urllib2</i> modules but in Py3k these modules are combined and all request response related functions are present in <i>urllib.request</i> and all errors are unders <i>urrlib.error</i> module. Functions like <i>urlencode</i> <i>quote</i> <i>unquote</i> which were in <i>urllib</i> module in Python2.6 are under <i>urllib.request </i>Py3k. This case of moving from Python 2.x to Py3k can be easily done by tool called <i>2to3.</i>But lets say moving from Python2.5 to Python2.6 how do we handle this situation?. Well below is the solution <i>(applicable when modules are renamed or moved during version change)</i></div><br /><div style="text-align: justify;"><i><b>Problem:</b></i> When I started working on <a href="http://smc.org.in/silpa">SILPA</a> I was running Debian Squeeze which had Python 2.5 as system default Python, but recently Debian Squeeze transitioned to Python 2.6 as default Python. We had some issue in the URL routing logic of the SILPA which I fixed 2 days back for which I used a function called <i>parse_qs </i>from <i>urlparse</i> module and everything worked fine on my system. I pushed the changes to the main git repository. Now the problem begins 2 mirrors of SILPA have Cron job setup to periodically pull the changes from git, and next day it was reported that 2 of the mirrors where throwing 500 internal server error. And its time for me to find what was causing the issue :).</div><br /><div style="text-align: justify;"><i><b>Reason:</b></i> Mirror instance of the SILPA were running older version of Python.(2.5) and the function <i>parse_qs</i> was not defined in the module <i>urlparse</i> which was causing the <i>ImportError</i>.</div><br /><div style="text-align: justify;"><i><b>Solution:</b></i> I figured out that in Python 2.5 version <i>parse_qs</i> is present but in <i>cgi</i> module instead of <i>urlparse</i>. So to make the code work in both Python versions (i.e. 2.5 and 2.6) I need to do a conditional import as shown below</div><br /><blockquote><i>try:</i><br /><i>&nbsp; &nbsp; from urlparse import parse_qs</i><br /><i>except ImportError:</i><br /><i>&nbsp; &nbsp; # Fall back for Python 2.5 </i><br /><i>&nbsp; &nbsp; from cgi import parse_qs </i></blockquote><br /><div style="text-align: justify;"> So I want to import <i>parse_qs</i> from <i>urlparse</i> module and if interpreter throws <i>ImportError</i> it means the Python version is &lt;2.6 so import the function from <i>cgi</i> module instead. So code is now backward compatible with Python2.5. Well that's it I call this as conditional importing I don't know what is the exact name for this method :). If you have any suggestions please do comment.</div><br />-- Vasudev

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">WEDNESDAY,  1 DECEMBER 2010</div>
      
      
      
      <h1>>New feature for Jabber Kannada Dictionary Bot <a class="glyph-permalink" href="/blog//2010/12/01/new-feature-for-jabber-kannada-dictionary-bot.html" title="Permanent link to: '>New feature for Jabber Kannada Dictionary Bot'">&diams;</a></h1>
      
      ><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">After seeing a great response and feedback for <a href="http://vasudevkamath.blogspot.com/2010/11/jabber-dictionary-bot-for-kannada.html">Kannada Jabber dictionary bot project</a> I thought of adding few new features and fixing some issues reported by the users. Here is the changelog</div><br /><div style="text-align: justify;">1. Bot was not replying for <b>Tiger</b> where as there was meaning for word <b>tiger</b> an issue reported by one of the user. I've fixed this issue and now bot is case insensitive.</div><div style="text-align: justify;">2. Bot was not providing all the meanings for some words for example for word <b>tiger </b>it was replying as ಪುಲಿ where as Kannada Wiktionary contained these meaning ಪುಲಿ, ಹುಲಿ, ವ್ಯಾಘ್ರ. This issue is fixed now bot gives all the meanings present in Kannada Wiktionary.</div><br />Thanks to Suma and Vivek Shankar for reporting these issues.<br /><br /><div style="text-align: justify;">Now for the new feature, many users had asked a way for adding meanings to word for undefined words. My friend <a href="http://aravindavk.in/">Aravinda</a> suggested me a way to do this, by letting user send the meaning to bot when bot replies no meaning found. So when bot doesn't find a meaning it replies to as show in below screenshot.</div><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/_Pms4ehFPMfI/TPW--FhGjZI/AAAAAAAABac/b75Nk_8qnHU/s1600/kn-new-reply.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="218" src="http://1.bp.blogspot.com/_Pms4ehFPMfI/TPW--FhGjZI/AAAAAAAABac/b75Nk_8qnHU/s400/kn-new-reply.png" width="400" /></a></div>&nbsp; <br /><br /><br /><br />So if you want to add the meaning to a word all you need to do is send the bot following line<br /><blockquote><i>#add&nbsp;</i><word><meaning(s)><i>word meaning(s)</i><br /></meaning(s)></word></blockquote><div style="text-align: justify;">If you have multiple meanings for a word please separate them with "<b>,</b>". We will collect all the meanings added by you and periodically send these to Wiktionary admins so they can verify these words and add them to Wiktionary. Please make use of this new feature and report back any bugs or any new suggestions :).. Also use the bot and help us to enrich the Kannada Wiktionary :).</div></div>

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SUNDAY, 21 NOVEMBER 2010</div>
      
      
      
      <h1>>A Jabber Dictionary Bot for Kannada <a class="glyph-permalink" href="/blog//2010/11/21/a-jabber-dictionary-bot-for-kannada.html" title="Permanent link to: '>A Jabber Dictionary Bot for Kannada'">&diams;</a></h1>
      
      ><div class="separator" style="clear: both; text-align: center;"></div><div style="text-align: justify;">If you want to know the Kannada meaning of a word or English meaning of a Kannada word using your IM then here is one Jabber dictionary bot for your assistance. You just need to send the word whose meaning you want to know to this bot and you will get the meaning of the word back or in case there is no meaning defined the bot will ask an apology :). Interesting eh?. The why are you waiting go on and add following email ID to your <i><b>Jabber/Gmail</b></i> buddy list.</div><blockquote>kn.dict.bot@jabber.org </blockquote><div style="text-align: justify;">When bot comes online just tell him <i><b>Hi</b></i> or <i><b>Hello</b></i> and you will get a nice welcome message which is shown below</div><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/_Pms4ehFPMfI/TOlVhgboBHI/AAAAAAAABaQ/BMI_aKFm-Yk/s1600/welcome-message.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="255" src="http://4.bp.blogspot.com/_Pms4ehFPMfI/TOlVhgboBHI/AAAAAAAABaQ/BMI_aKFm-Yk/s320/welcome-message.png" width="320" /></a></div>Now send a word either in English or Kannada and see what happens :).<br /><br /><div style="text-align: justify;">This bot was originally developed by <a href="http://thottingal.in/">Santhosh Thottingal</a> and <a href="http://smc.org.in/">SMC</a> developers for Hindi and Malayalam, you can find more information about these bots <a href="http://thottingal.in/blog/2010/11/20/dictionary-jabber-buddy-bots/">here</a> this bot supports Dictd protocol and Wiktionary. Currently this bot only uses <a href="http://kn.wiktionary.org/">Kannada Wiktionary</a> as back end since&nbsp; Kannada Dictd dictionaries are not developed. Once we develop a Dictd dictionary I'll enable the Dictd support.&nbsp; I'm thankful to <i>Santhosh Thottinal</i> and <i>SMC</i> for allowing me to host the bot on their VPS.</div><br />Please use this bot service and report any bugs or suggestions. My email Id can be found on my blogger profile. <br />&nbsp;

    </div>
    
    <br/>
    <hr class="front">
    <br/>
    
    
    <div class="front">
      
      
      <div align="right" class="date-container">SUNDAY, 26 SEPTEMBER 2010</div>
      
      
      
      <h1>>Fix: iBus not working with OpenOffice in Xfce4 <a class="glyph-permalink" href="/blog//2010/09/26/fix-ibus-not-working-with-openoffice-in-xfce4.html" title="Permanent link to: '>Fix: iBus not working with OpenOffice in Xfce4'">&diams;</a></h1>
      
      ><div style="text-align: justify;">Today I faced a really weird problem of unable to type Kannada in OpenOffice Writer using iBus. I'm using Xfce4 with GDM in Debian and installed it recently. I was able write in Kannada in OpenOffice&nbsp; with KDE4 and KDM.&nbsp;</div><div style="text-align: justify;">After a small research igured out the issue was&nbsp; mainly because <i><b>openoffice.org-gnome</b></i> pacakge was not installed in my system where as in KDE environment with KDM had <i><b>openoffice.org-kde</b></i> installed.&nbsp;</div><div style="text-align: justify;">Fix: If you are also facing this issue just check you have <i><b>openoffice.org-gnome (for gdm) and openoffice.org-kde (for kdm)</b></i> installed. After installing this packages you can start typing Kannada (or any other language) using iBus in OpenOffice.</div>

    </div>
    
    
  </ul>

</div>


        </div>
        <div class="fourcol last">
          <div class="widget">
            Connect to me on Friendica
            <script src="http://frndk.de/widgets/friends?k=37533857"></script>
          </div>
        </div>
      </div>
    </div>

    <div class="container footer">
      <div class="site">
        <div class="row">
          <div class="footer">
            <div class="contact">
              <p>
                (c) 2012 Vasudeva Kamath<br />
                The contents of this site are shared under <a href="http://creativecommons.org/licenses/by-sa/3.0/" class="contact">CC-BY-SA-3.0 Unported</a>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <a href="http://github.com/copyninja"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" /></a>
  </body>
</html>


