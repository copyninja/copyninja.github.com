--- 
layout: post
title: "Tutorial: Packaging Ruby Gem in Debian"
published: true
meta: 
  blogger_author: Vasudev Kamathhttp://www.blogger.com/profile/05106578827322209004noreply@blogger.com
  blogger_blog: blog.copyninja.info
  blogger_permalink: /2011/05/tutorial-packaging-ruby-gem-in-debian.html
tags: 
- Debian
- packaging
type: post
status: publish
---
><div dir="ltr" style="text-align: left;" trbidi="on"><div style="color: red; text-align: justify;"><i><b>Disclaimer: I'm not a ruby programmer I do ruby packaging because I want to help out the pkg-ruby-extras in their transition to new policy in Wheezy</b></i></div><br /><div style="text-align: justify;">To start with I came to package ruby because we (me and some of my friends) wanted to package Diaspora for Debian but later figured that there is lot needs to be done in the <i>pkg-ruby-extras</i> so thought of helping the team which will intern help in packaging Diaspora.</div><div style="text-align: justify;">Before I start here is the new policy for Ruby in Wheezy [1] and here is the current status of ruby packages in Wheezy [2] this is regernerated daily.</div><br /><div style="text-align: justify;">New policy uses a tool called <i>gem2deb</i> which makes it very easy to package a gem (of course it only creates skeleton package :)). If you are on testing/unstable you can install the tool by issuing following command</div><blockquote><i># apt-get install gem2deb</i> </blockquote><div style="text-align: justify;">If not you can install it from Github using following commands</div><br /><blockquote><pre style="font-family: inherit;"><i>git clone git://github.com/ln/gem2deb.git<br /><span class="anchor" id="line-2"></span>cd gem2deb<br /><span class="anchor" id="line-3"></span>rake install<br /><span class="anchor" id="line-4"></span>then, cd to some temporary place, and do:<br /><span class="anchor" id="line-5"></span>gem2deb rdiscount # native gem<br /><span class="anchor" id="line-6"></span>or:<br /><span class="anchor" id="line-7"></span>gem2deb i18n # pure-ruby gem</i></pre></blockquote><br /><div style="text-align: justify;">Once you have installed gem2deb its a 3 step task, follow the following 3 steps to get a rough package source ready of a gem</div>1. Download the gem using following command<br /><blockquote><i>gem fetch polyglot</i></blockquote>2. Convert the <b><i>.gem</i></b> file to <b><i>.tar.gz</i></b> using following command<br /><blockquote><i>gem2tgz polyglot-0.3.1.gem</i></blockquote>3. Now create a rough Debian package source using following command<br /><blockquote><i> dh-make-ruby polyglot-0.3.1.tar.gz</i></blockquote><div style="text-align: justify;">Actually the <i>pkg-ruby-extras</i> team suggests using gem2deb in the second step itself which tries to build the gem along with creating Debian package source for it. But I prefer going this way and build the package once I'm completely finished with packaging related stuffs for the package (i.e editing copyright control changelog and other stuffs). If you think you are lazy to follow the above 3 steps then you should checkout the script which I've written. All you need to do is give the gem name(s) to the script and it does the above 3 steps for you.</div><br /><script src="https://gist.github.com/973217.js"> </script><br /><br /><div style="text-align: justify;">Once the above 3 steps and editing task for the package is done go ahead and build the package using <i>pbuilder. </i>Check the resulting package for lintian warnings and errors (You can ignore warning regarding <i>ruby-version</i> field for now there is already a wishlist bug reported against lintian for this). If you are a new maintainer like me go ahead and upload the package to mentors.debian.net and send RFS to <i>debian-ruby at lists dot debian dot org </i>and wait for the review :) (and do promptly follow up to the replies).<br /></div><div style="text-align: justify;">Reference for this tutorial is in RubyInWheezy page [1]. After reading this tutorial if you are Debian user and passionate about Debian I hope you will help out <i>pkg-ruby-extras</i> in this transition :)</div><br />[1] <a href="http://wiki.debian.org/Teams/Ruby/RubyInWheezy">http://wiki.debian.org/Teams/Ruby/RubyInWheezy</a><br />[2] <a href="http://pkg-ruby-extras.alioth.debian.org/wheezy/details.html">http://pkg-ruby-extras.alioth.debian.org/wheezy/details.html</a></div>
