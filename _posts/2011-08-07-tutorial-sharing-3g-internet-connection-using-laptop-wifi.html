--- 
layout: post
title: "Tutorial: Sharing 3G Internet Connection Using Laptop Wifi"
published: true
meta: 
  blogger_author: Vasudev Kamathhttp://www.blogger.com/profile/05106578827322209004noreply@blogger.com
  blogger_blog: blog.copyninja.info
  blogger_permalink: /2011/08/tutorial-sharing-3g-internet-connection.html
tags: 
- Debian
- LINUX
- Sysadmin
type: post
status: publish
---
><div dir="ltr" style="text-align: left;" trbidi="on"><div style="text-align: justify;">I've got a new laptop and plan to buy a new internet connection. Since me and my room mate are planning to share the cost of internet we are now faced with a problem of how to share a single datacard connection b/w us. After searhching a lot in the internet came accross this article [1]. But the new isc-dhcp-server package in Debian was not running for some reason so thought of going in my own way using dnsmasq as dhcp and dns server for peer laptop. Below is what I did.</div><br /><div style="text-align: justify;">First step is to install dnsmasq. Below is the command for installing the&nbsp; same for Debian based distro. For other distro please follow your distro documentation</div><br /><blockquote><i>apt-get install dnsmasq</i></blockquote><div style="text-align: justify;">Next step is configuring the dnsmasq as dhcp and dns cache. First rename the original configuration file <i>dnsmasq.conf</i> found in /etc to <i>dnsmasq.conf.orig</i> and create new empty file in place of it</div><br /><blockquote><i>sudo mv /etc/dnsmasq.conf /etc/dnsmasq.conf.orig</i> </blockquote><blockquote><i>sudo touch /etc/dnsmasq.conf</i> </blockquote>Now add this to your dnsmasq.conf.&nbsp; <br /><script src="https://gist.github.com/1130151.js"> </script><br /><div style="text-align: justify;">Modify the file as required. I assume the reader knows basics of dhcp and dns stuffs. If you didn't understand few stuffs ping me or use man page which provides all the information about the commands.</div><br /><div style="text-align: justify;">After editing dnsmasq.conf now restart the dnsmasq daemon using following command</div><br /><blockquote><i>sudo /etc/init.d/dnsmasq restart # Debian</i><br /><i>sudo /etc/rc.d/dnsmasq restart # Arch</i></blockquote><div style="text-align: justify;">We need to have a small script to enable the internet sharing. This script is originaly taken from [1] I've only enabled the wep encryption to secure the access point</div><br /><script src="https://gist.github.com/1130164.js"> </script><br /><br /><div style="text-align: justify;">You should run this script as root and once executed you should be able to see the network access point!. Next step is testing B.A.T.M.A.N integration, till then cya..</div><br />Reference:<br />[1] http://www.go2linux.org/linux/2011/03/share-your-3g-internet-connection-over-wifi-linux-ipod-touch-925 <br />[2] http://element.edoceo.com/howto/dnsmasq<br /><br /></div>
