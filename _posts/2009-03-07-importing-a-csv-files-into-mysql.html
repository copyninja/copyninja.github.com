--- 
layout: post
title: "Importing a CSV Files into MySQL"
published: true
meta: 
  blogger_author: Vasudev Kamathhttp://www.blogger.com/profile/05106578827322209004noreply@blogger.com
  blogger_blog: blog.copyninja.info
  blogger_permalink: /2009/03/importing-csv-files-into-mysql.html
tags: 
- CSV
- MySQL
type: post
status: publish
---
><div style="text-align: justify;">CSV stands for Coma separated Values. Normally in this file each field is separated from other using ",". Well as part of my project I created a sniffer which will be sitting on the gateway and captures all packet coming and going to and from it. I needed to record all the traffic which I capture. Bestway is to dump it into a log file. First I thought of using space as delimeter but our sir told its better to use CSV instead so I seperated each fields using coma's. As per the requirement of the project I needed to create different forms of graphs. First I thought of creating graphs statically at the end of each day by using the Crontab facility. But our sir wanted us to make this graph generation dynamically. Well using flat file which grows very fast really gave us a head ache. But I read in some site that I can easily import the CVS files into any application. I stumbled uppon the PHPMyAdmins import facility which supports importing data from CSV File. I got the query from PHPMyAdmin to do the job.</div><div style="text-align: justify;">Let me tell how to import your log files into database.</div><div style="text-align: justify;">1. Create a table with number of fields equal to number of fields in your fail.</div><div style="text-align: justify;">2. Use the LOAD DATA command to get files content into table. Below is the syntax of the command</div><br /><pre name="cde" class="sql">LOAD DATA [LOW_PRIORITY | CONCURRENT] [LOCAL] INFILE 'file_name'<br />    [REPLACE | IGNORE]<br />    INTO TABLE tbl_name<br />    [CHARACTER SET charset_name]<br />    [{FIELDS | COLUMNS}<br />        [TERMINATED BY 'string']<br />        [[OPTIONALLY] ENCLOSED BY 'char']<br />        [ESCAPED BY 'char']<br />    ]<br />    [LINES<br />        [STARTING BY 'string']<br />        [TERMINATED BY 'string']<br />    ]<br />    [IGNORE number LINES]<br />    [(col_name_or_user_var,...)]<br />    [SET  = expr,...]</pre><div style="text-align: justify;">For example my log file consisted of 8 fields. Format is shown below</div><blockquote>timestamp,eth_src,ip_src,src_port,eth_dest,ip_dest,dest_port,protocol</blockquote><div style="text-align: justify;">I created table to consist these 10 fields with time stamp as primary key and used <b>load data</b> command as follows</div><pre name="code" class="sql">LOAD DATA LOCAL INFILE '/var/log/sniffer.log' IGNORE INTO TABLE `sniffer`<br />FIELDS TERMINATED BY ','<br />ESCAPED BY '\\'<br />LINES TERMINATED BY '\n'</pre><div style="text-align: justify;">&nbsp;In your log file delimeter can be any charachter you want, you just need to specify it as <b>FIELDS TERMINATED BY ','</b>. Similarly you can specify the line terminator also.</div><div style="text-align: justify;">For more information about this command refer this <a href="http://dev.mysql.com/doc/refman/5.1/en/load-data.html">link</a>. Also don't forget to try out <a href="http://www.phpmyadmin.net/">PHPMyAdmin</a></div>
